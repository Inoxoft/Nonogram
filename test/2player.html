<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background-color: #ffd;
    }
  </style>
</head>

<body>

  <div>
    <input type="number" id="m" min="1" max="20" step="1" value="5">
    <input type="number" id="n" min="1" max="20" step="1" value="5">
    <input type="range" id="threshold" min="0" max="1" step="0.01" value="0.5">
    <button onclick="toggleSolution()">Toggle Solution</button>
  </div>
  <canvas id="solution"></canvas>
  <canvas id="game"></canvas>
  <script src="../docs/nonogram.min.js"></script>


  <script>
    function $(selector) {
      return document.querySelector(selector)
    }
    function $$(selector) {
      return document.querySelectorAll(selector)
    }
    var canvases = $$('canvas')
    function newCustomNonogram() {
      new nonogram.Editor(
        parseInt($('#m').value),
        parseInt($('#n').value),
        canvases[0],
        {
          threshold: parseFloat($('#threshold').value),
          onHintChange: function (row, column) {
            new nonogram.Game(row, column, 'game', {
              theme: {
                boldMeshGap: 0,
              },
              onSuccess: function () {
                console.log('success')
              },
              onAnimationEnd: function () {
                console.log('animation end')
              }
            })
          },
        }
      )
    }
    $('#m').addEventListener('change', newCustomNonogram)
    $('#n').addEventListener('change', newCustomNonogram)
    $('#threshold').addEventListener('change', newCustomNonogram)
    newCustomNonogram()
  </script>

  <script>
    function toggleSolution() {
      var x = document.getElementById("solution");
      if (x.style.display === "none") {
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
  </script>

</body>

</html>